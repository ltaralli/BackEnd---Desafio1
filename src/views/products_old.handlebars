<div class="navbar bg-base-100">
  <div class="navbar-start">
    <div class="dropdown">
      <label tabindex="0" class="btn btn-ghost lg:hidden">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h8m-8 6h16" /></svg>
      </label>
      <ul tabindex="0" class="menu menu-sm dropdown-content mt-3 z-[1] p-2 shadow bg-base-100 rounded-box w-52">
        <li><a>Item 1</a></li>
        <li>
          <a>Parent</a>
          <ul class="p-2">
            <li><a>Submenu 1</a></li>
            <li><a>Submenu 2</a></li>
          </ul>
        </li>
        <li><a>Item 3</a></li>
      </ul>
    </div>
    <a href="/logout"><button class="btn btn-secondary">Cerrar sesion</button></a>
  </div>
  <div class="navbar-center hidden lg:flex">
    <ul class="menu menu-horizontal px-1">
      <li><a>Item 1</a></li>
      <li tabindex="0">
        <details>
          <summary>Parent</summary>
          <ul class="p-2">
            <li><a>Submenu 1</a></li>
            <li><a>Submenu 2</a></li>
          </ul>
        </details>
      </li>
      <li><a>Item 3</a></li>
    </ul>
  </div>
  <div class="navbar-end">
    <a href="/carts/{{cart._id}}" ><button value="{{cart._id}}" class="cartID btn btn-primary">CARRITO</button></a>
  </div>
</div>
    {{#if user.first_name}}
    <div class="chat chat-start">
      <div class="chat-bubble"><h6>Bienvenido, {{user.first_name}}! Tu rol es: {{user.role}}</h6>
    </div>
    {{/if}}
  </div>
  <div class="container mx-auto">

      <div class="flex flex-wrap justify-center items-center ">
        <form method="GET" action="/products" class="mb-3">
          <div class="flex mx-2">
            <div class="w-full md:w-1/4 px-2 mb-4">
              <label for="limitSelect" class="block text-sm font-medium text-white-700">Mostrar:</label>
              <select name="limit" id="limitSelect" class="select select-primary w-full max-w-xs">
                <option value="10" {{#if_eq limit "10"}} selected{{/if_eq}}>10</option>
                <option value="20" {{#if_eq limit "20"}} selected{{/if_eq}}>20</option>
                <option value="50" {{#if_eq limit "50"}} selected{{/if_eq}}>50</option>
              </select>
            </div>
            <div class="w-full md:w-1/4 px-2 mb-4">
              <label for="category" class="block text-sm font-medium text-white-700">Categor√≠a:</label>
              <select name="category" id="category" class="select select-primary w-full max-w-xs">
                <option value="">Todas</option>
                {{#each categories}}
                  <option value="{{name}}"{{#if selected}} selected{{/if}}>{{name}}</option>
                {{/each}}
              </select>
            </div>
            <div class="w-full md:w-1/4 px-2 mb-4">
              <label for="sortSelect" class="block text-sm font-medium text-white-700">Ordenar por precio:</label>
              <select name="sort" id="sortSelect" class="select select-primary w-full max-w-xs">
                <option value="asc" {{#if_eq sort "asc"}} selected{{/if_eq}}>Ascendente</option>
                <option value="desc" {{#if_eq sort "desc"}} selected{{/if_eq}}>Descendente</option>
              </select>
            </div>
            <div class="w-full md:w-1/4 px-2 mb-4">
              <button type="submit" class="btn btn-primary">Aplicar</button>
              </div>
          </div>
        </form>
        <div></div>
        <h1 class="">Lista de Productos</h1>
        <div class="grid grid-cols-5 gap-6">
          {{#each products}}
            <div class="card card-compact w-72  shadow-xl">
              <figure class="px-15"><img src="{{this.thumbnails}}" alt={{this.category}} /></figure>
              <div class="card-body">
                <h2 class="card-title">{{this.title}}</h2>
                <div class="badge badge-secondary">Orwer: {{this.owner}}</div>
                <p>{{this.description}}</p>
                <div class="card-actions justify-end">
                  <div class="badge badge-outline">{{this.category}}</div> 
                  <div class="badge badge-outline">Stock: {{this.stock}}</div>
                </div>
                <button class="add-to-cart-btn btn btn-primary" data-product-id="{{this._id}}">Add to Cart</button>
              </div>
            </div>
          {{/each}}
        </div>

      <div class="join m-10">
          {{#if hasPrevPage}}
            <button class="join-item btn"><a class="page-link" href="{{prevLink}}">Anterior</a></button>
          {{/if}}
            {{#if page}}
          <button class="join-item btn">{{page}}</button>
            {{/if}}
            {{#if hasNextPage}}
          <button class="join-item btn"><a class="page-link" href="{{nextLink}}">Siguiente</a></button>
            {{/if}}
      </div>


  <script src="/js/addProduct.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</div>